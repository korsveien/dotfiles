# Titlebars
smart_borders on
smart_gaps on
gaps inner 8

# Colors
# https://developer.apple.com/design/human-interface-guidelines/macos/visual-design/color/
#
set $blue #498dff
set $purple #CF83F5

# class                     border  backgr. text  indicator child_border
    client.focused          #333333 #333333 #ffffff $purple $blue
    client.focused_inactive #333333 #5f676a #ffffff #484e50 #5f676a
    client.unfocused        #333333 #222222 #888888 #292d2e #222222
    client.urgent           #2f343a #900000 #ffffff #900000 #900000


# Default terminal
set $term alacritty

# Application launcher
set $menu wofi --show run


# # Gnome settings (gtk)
set $gnome-schema org.gnome.desktop.interface
exec_always {
    gsettings set $gnome-schema gtk-theme 'Sierra-dark'
    gsettings set $gnome-schema icon-theme 'Papirus-dark'
    gsettings set $gnome-schema font-name 'Source Sans Pro 12'
    gsettings set $gnome-schema document-font-name 'Source Sans Pro 12'
    gsettings set $gnome-schema monospace-font-name 'Source Code Pro 12'
    gsettings set org.gnome.desktop.wm.preferences titlebar-font 'Source Sans 3 Regular'
    gsettings set org.gnome.desktop.wm.preferences button-layout ''
    gsettings set org.gnome.desktop.default-applications.terminal exec $term
    gsettings set org.gnome.desktop.default-applications.terminal exec-arg ''
}

font pango:SourceSansPro Medium 11

# Wallpaper
output * bg ~/.config/sway/mountains.jpg fill

# Set up clipboard manager
exec wl-paste -t text --watch clipman store
exec wl-paste -p -t text --watch clipman store -P --histpath="~/.local/share/clipman-primary.json"
exec clipman restore

# Set up swayr
exec env RUST_BACKTRACE=1 swayrd > /tmp/swayrd.log 2>&1

### Idle configuration
exec swayidle -w \
         timeout 600 'swaylock --screenshots --clock --grace 5 --indicator --effect-blur 8x8' \
         timeout 900 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' \
         before-sleep 'playerctl pause && swaylock --screenshots --clock --grace 5 --indicator --effect-blur 8x8'
#
# This will lock your screen after 300 seconds of inactivity, then turn off
# your displays after another 300 seconds, and turn your screens back on when
# resumed. It will also lock your screen before your computer goes to sleep.


### Input configuration

# You can get the names of your inputs by running: swaymsg -t get_inputs
# Read `man 5 sway-input` for more information about this section.
input * {
    repeat_delay 250
    xkb_layout "us(altgr-intl)"
    xkb_options caps:ctrl_modifier
}

input pointer {
    accel_profile adaptive
}

### Key bindings

# Alt as mod key
set $mod Mod1

# Kill window with alt and right mouse button
bindsym --whole-window $mod+button2 kill

# Lock screen
bindsym $mod+l exec swaylock --screenshots --clock --grace 5 --indicator --effect-blur 8x8

# Upload screenshot and copy url to clipboard
bindsym $mod+Shift+Print exec slurp | grim -g - - | curl --form 'file=@-' http://0x0.st | wl-copy && swaynag -m "screenshot uploaded & url copied to clipboard"

# Clipboard manager
bindsym $mod+Shift+c exec clipman pick -t rofi

# Start a terminal
bindsym $mod+return exec $term

# Kill focused window
bindsym $mod+Shift+w kill

# Start your launcher
bindsym $mod+Space exec $menu

# Default shorcuts for floating windows
floating_modifier $mod normal

# Reload the configuration file
bindsym $mod+Shift+r reload

# Exit sway (logs you out of your Wayland session)
bindsym $mod+Shift+q exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'

# hjkl keys
bindsym $mod+j fullscreen

#
# Resizing containers:
#
set $resize_factor 20ppt

bindsym $mod+shift+left move left
bindsym $mod+shift+right move right
bindsym $mod+shift+up resize grow width $resize_factor
bindsym $mod+shift+down resize shrink width $resize_factor

bindsym $mod+left focus left
bindsym $mod+right focus right
bindsym $mod+up focus up
bindsym $mod+down focus down

#
# Workspaces:
#
# Switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 0

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 0

# Toggle the current focus between tiling and floating mode
bindsym $mod+Shift+f floating toggle

# Swap focus between the tiling area and the floating area
bindsym $mod+f focus mode_toggle

for_window [class="1Password"] floating enable
for_window [class="Signal"] floating enable

# Move the currently focused window to the scratchpad
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# Status Bar:

# Read `man 5 sway-bar` for more information about this section.
bar {
    swaybar_command waybar
}

# Media keys
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym XF86MonBrightnessUp exec brightnessctl set +5%
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym XF86Search exec bemenu-run

include /etc/sway/config.d/*
bindsym Ctrl+Space exec env RUST_BACKTRACE=1 \
    swayr switch-window >> /tmp/swayr.log 2>&1

bindsym $mod+Delete exec env RUST_BACKTRACE=1 \
    swayr quit-window > /tmp/swayr.log 2>&1

bindsym $mod+Tab exec env RUST_BACKTRACE=1 \
    swayr switch-to-urgent-or-lru-window >> /tmp/swayr.log 2>&1

bindsym $mod+c exec env RUST_BACKTRACE=1 \
    swayr execute-swaymsg-command >> /tmp/swayr.log 2>&1

# bindsym $mod+Shift+c exec env RUST_BACKTRACE=1 \
#     swayr execute-swayr-command >> /tmp/swayr.log 2>&1
